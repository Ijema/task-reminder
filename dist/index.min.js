"use strict";var alarmIntervalId,new_task=document.getElementById("task_container"),task_menu_name=document.getElementById("menu_left"),new_task_list=document.getElementById("task_list_container"),start_id=1,select_id=0,reminder_id=0,app_data=[{name:"Task Name",task:[{name:"Task List",is_completed:!1,id:1}],id:1}],app_reminder=[],change_task=function(a){var e=app_data.findIndex(function(e){return e.id===a});if(-1!==e){var t="Task Name"!==app_data[select_id=e].name?app_data[select_id].name:"";document.getElementById("task_name").value=t,checkAlarm(),setReminder()}else select_id=Math.max(0,app_data.length-1),document.getElementById("task_name").value="";""===grabDate.value&&""===grabTime.value?(grabDate.value="",grabTime.value="",resetReminder.style.display="none",grabDate.style.display="none",grabTime.style.display="none",startReminder.style.display="inline-block"):(resetReminder.style.display="inline-block",grabDate.style.display="inline-block",grabTime.style.display="inline-block"),set_task(),set_task_list()},set_task=function(){for(var e="",a=0;a<app_data.length;a++){var t=app_data[a],n=t.id-1==select_id?"task active":"task";e+='\n                <div onclick = "change_task('.concat(t.id,')" class="').concat(n,'">\n                  ').concat(t.name,"\n                </div>")}new_task.innerHTML=e,task_menu_name.innerHTML=app_data[select_id].name},add_task=function(){start_id=0<app_data.length?app_data[app_data.length-1].id+1:1,app_data.push({name:"Task Name",task:[{name:"Task List",is_completed:!1,id:1}],id:start_id}),set_task(),setReminder(),console.log(app_data)},get_task_name=function(){var e=document.getElementById("task_name").value;app_data[select_id].name=e,set_task()},change_task_list=function(e){var a=e-1,t=document.getElementById("task_list_"+e);app_data[select_id].task[a].name=t.value},set_task_list=function(){for(var e="",a=0;a<app_data[select_id].task.length;a++){var t=app_data[select_id].task[a],n="Task List"==t.name?"":t.name;e+='<div id="task_list">\n                <input type="checkbox" name="task_list_name" id="task_list_checkbox">\n                <input type="text" oninput="change_task_list('.concat(t.id,')" id="task_list_').concat(t.id,'" value="').concat(n,'" placeholder="Task List">\n              </div>')}new_task_list.innerHTML=e},add_task_list=function(){var e=app_data[select_id].task.length,a=app_data[select_id].task[e-1].id;app_data[select_id].task.push({name:"Task List",is_completed:!1,id:a+1}),set_task_list()},delete_task=function(){app_data.length<=1?alert("Cannot delete the last task."):(app_data.splice(select_id,1),select_id>=app_data.length&&(select_id=app_data.length-1),set_task(),set_task_list(),change_task(select_id+1))},refresh=function(){app_data=[{name:"Task Name",task:[{name:"Task List",is_completed:!1,id:1}],id:1}],select_id=0,document.getElementById("task_name").value="",grabDate.value="",grabTime.value="",resetReminder.style.display="none",grabDate.style.display="none",grabTime.style.display="none",startReminder.style.display="inline-block",set_task(),set_task_list()};set_task(),set_task_list();var grabDate=document.getElementById("date"),grabTime=document.getElementById("time"),resetReminder=document.getElementById("reset"),startReminder=document.getElementById("start_reminder"),audioPlayer=document.getElementById("audio_player"),setReminderToTask=function(){var a=app_data[select_id].name,e=app_reminder.find(function(e){return e.name===a}),t=grabDate.value.trim(),n=grabTime.value.trim();if(""!==t&&""!==n){if(!e){var i={name:a,date:[t],time:[n],id:reminder_id+1};app_reminder.push(i),reminder_id++}console.log(app_reminder)}},show_date_time=function(){document.getElementById("schedule_time").style.marginTop="20px",grabDate.style.display="inline-block",grabTime.style.display="inline-block",startReminder.style.display="inline-block",resetReminder.style.display="inline-block"};function checkAlarm(){var e=new Date,a=!0,t=!1,n=void 0;try{for(var i,s=app_reminder[Symbol.iterator]();!(a=(i=s.next()).done);a=!0)for(var l=i.value,r=0;r<l.date.length;r++){var d=parseDate(l.date[r]),m=parseTime(l.time[r]);d&&m&&d.getDate()===e.getDate()&&d.getMonth()===e.getMonth()&&d.getFullYear()===e.getFullYear()&&m.getHours()===e.getHours()&&m.getMinutes()===e.getMinutes()&&playAlarm()}}catch(e){t=!0,n=e}finally{try{a||null==s.return||s.return()}finally{if(t)throw n}}}function parseDate(e){if("string"!=typeof e||""===e.trim())return null;var a=e.split("-");if(3!==a.length)return null;var t=parseInt(a[0]),n=parseInt(a[1])-1,i=parseInt(a[2]);return new Date(t,n,i)}function parseTime(e){if("string"!=typeof e||""===e.trim())return null;var a=e.split(":");if(2!==a.length)return null;var t=parseInt(a[0]),n=parseInt(a[1]);return new Date(1970,0,1,t,n)}function playAlarm(){audioPlayer.paused&&audioPlayer.play().catch(function(e){console.log("Failed to play the audio: "+e.message)})}function setAlarm(){var e=parseDate(grabDate.value),a=parseTime(grabTime.value);clearInterval(alarmIntervalId),alarmIntervalId=setInterval(checkAlarm,1e3),e&&a?console.log("Alarm set for: "+e+" "+a):console.log("Invalid date or time format"),setReminderToTask()}function clearAlarm(){var a=app_data[select_id].name,e=app_reminder.find(function(e){return e.name===a});clearInterval(alarmIntervalId),audioPlayer&&(audioPlayer.pause(),audioPlayer.currentTime=0,grabDate.value="",grabTime.value="",grabDate.style.display="none",grabTime.style.display="none",resetReminder.style.display="none",e.date="",e.time="")}setInterval(checkAlarm,1e3),startReminder.addEventListener("click",setAlarm),resetReminder.addEventListener("click",clearAlarm);var setReminder=function(){var a=app_data[select_id].name,e=app_reminder.find(function(e){return e.name===a});e&&e.date&&e.time?(grabDate.value=e.date,grabTime.value=e.time,startReminder.style.display="none"):(grabDate.value="",grabTime.value="")};
//# sourceMappingURL=index.min.js.map
